<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Casos de Uso y Transacciones &quot;Índice Maestro de Pacientes&quot; - Núcleo de Interoperabilidad de Datos (NID) - MINSAL v0.4.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
<link href="assets/css/hl7chile.css" rel="stylesheet" />
<script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-HLBNC861DJ" async>
</script>

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script type="text/javascript" src="assets/js/mermaid.js"></script>
    <script type="text/javascript" src="assets/js/mermaid-init.js"></script>
    <style type="text/css">h2{--heading-prefix:"4"}
    h3,h4,h5,h6{--heading-prefix:"4"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->

<div id="project-nav">
    <a id="MINSAL-logo" no-external="true" href="http://minsal.cl">
        <img height="71" alt="Visitar sitio MINSAL Chile" src="assets/images/minsal-logo.svg" />
    </a>
</div>
<div id="family-nav">
    <a id="hl7chile-logo" no-external="true" href="http://hl7chile.cl"><img height="71" alt="Visitar HL7 Chile" src="assets/images/hl7chile-logo.svg" /> </a>
</div>
<!--
<div id="hl7-search">
  <a id="hl7-search-lnk" no-external="true" href="searchform.html"><img alt="Search FHIR" src="assets/images/search.png"/></a>
</div>
-->

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Núcleo de Interoperabilidad de Datos (NID) - MINSAL</span>
            <br/>
            <span style="display:inline-block;">0.4.0 - draft



  <img alt="Chile flag" src="assets/images/chl.svg" height="16" title="Chile"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Inicio</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Especificaciones de Negocio
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="negocioMPI.html">Negocio MPI</a>
      </li>
      <li>
        <a href="negocioHPD.html">Negocio HPD</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Especificaciones Técnicas
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="transaccionesBusquedasMPI.html">Busquedas de Pacientes</a>
      </li>
      <li>
        <a href="transaccionesBusquedasHPD.html">Busqueda de Profesionales</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="artifacts.html">Artefactos</a>
  </li>
  <li>
    <a href="changes.html">Historial de Cambios</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>Casos de Uso y Transacciones &quot;Índice Maestro de Pacientes&quot;</b></li>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">Núcleo de Interoperabilidad de Datos (NID) - MINSAL - Local Development build (v0.4.0) built by the FHIR (HL7® FHIR® Standard) Build Tools. See the <a href="https://interoperabilidad.minsal.cl/fhir/ig/nid/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>Casos de Uso y Transacciones &quot;Índice Maestro de Pacientes&quot;</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#descripción-general" id="markdown-toc-descripción-general">Descripción General</a></li>
  <li><a href="#caso-de-uso-1-identificación-cruzada-de-pacientes" id="markdown-toc-caso-de-uso-1-identificación-cruzada-de-pacientes">Caso de Uso 1: Identificación Cruzada de Pacientes</a></li>
  <li><a href="#caso-de-uso-2-consulta-de-información-de-datos-demográficos-de-paciente" id="markdown-toc-caso-de-uso-2-consulta-de-información-de-datos-demográficos-de-paciente">Caso de Uso 2: Consulta de información de Datos Demográficos de paciente.</a></li>
</ul>

</div>
<h3 id="descripción-general">Descripción General</h3>

<p>Esta Guía modela el funcionamiento mediante transacciones FHIR, para el consumo y tributación de elementos identificatorios y demográficos de pacientes, entre sistemas de información en salud y un <strong>Indice Maestro de Pacientes</strong> (MPI)
<br /></p>

<p>Las transacciones descritas a continuación se basan el modelamiento de intercambio de datos desarrollado por <em>IHE</em> para estos fines, aplicados al estándar <strong>FHIR</strong> en las definiciones de los siguientes perfiles:</p>

<ul>
  <li><a href="https://profiles.ihe.net/ITI/PIXm/index.html">PIXm</a>: El perfil Patient Identifier Cross-reference for Mobile (PIXm) proporciona transacciones RESTful  para crear, actualizar y eliminar registros de pacientes en un gestor de referencias cruzadas de identificadores de pacientes y para consultar el gestor de referencias cruzadas de identificadores de pacientes para los identificadores entre dominios de un paciente.
<br /></li>
</ul>
<div align="center">
  <img src="PIXm.png" /> 
  <p>Diagrama Actores PIXm (Fuente: Perfil IHE)</p>
</div>
<p><br /></p>

<ul>
  <li><a href="https://profiles.ihe.net/ITI/PDQm/">PDQm</a>: El perfil de integración de consulta de datos demográficos de pacientes ofrece a varias aplicaciones distribuidas la posibilidad de consultar una lista de pacientes en un servidor de información de pacientes, basándose en criterios de búsqueda definidos por el usuario, y recuperar la información demográfica de un paciente (y, opcionalmente, información relacionada con la visita) directamente en la aplicación.
<br /></li>
</ul>
<div align="center">
  <img src="PDQm.png" /> 
  <p>Diagrama Actores PDQm (Fuente: Perfil IHE)</p>
</div>

<p><br /></p>

<h3 id="caso-de-uso-1-identificación-cruzada-de-pacientes">Caso de Uso 1: Identificación Cruzada de Pacientes</h3>

<p>Este Caso comprende la identificción de un paciente en un sistema determinado (con identificación local),consultada por sistema (otra identificación local), por medio de un gestor de identificaciones.</p>

<h4 id="actores">Actores</h4>

<ul>
  <li><em>Fuente de la Identificación del Paciente</em>: La Fuente de Identidad del Paciente es el productor y editor de los datos de identidad del paciente.</li>
  <li><em>Consumidor de la identificación por referencia cruzada</em>: El consumidor de referencias cruzadas de identificadores de pacientes consulta las listas de identificadores de pacientes desde el gestor de referencias cruzadas de identificadores de pacientes.</li>
  <li><em>Gestor de indentificaciones de referencias cruzadas</em>: El gestor de referencias cruzadas de identificadores de pacientes gestiona los datos de identidad de pacientes de distintos dominios y cruza referencias de datos de identidad de pacientes de distintos dominios para el mismo paciente.</li>
</ul>

<h4 id="transacciones">Transacciones</h4>

<p>Por el momento consideraremos solo una trasaccion para un único caso de uso de <strong>PIXm</strong>, que consite en la consulta de identificación de pacientes entre identificadores de distintos dominios <em>(el mismo paciente en diferentes dominios con identificadores distintos)</em>.
<br /></p>
<div align="center">
  <img src="PIXmtrans.png" /> 
  <p>Transacción del Caso (Fuente: Perfil IHE)</p>
</div>

<p><br /></p>

<h5 id="solicitud">Solicitud</h5>

<p>La operación se desarrolla basada en un <strong>HTTP GET</strong> o <strong>HTTP POST</strong> del <em>Consumidor</em> al <em>Gestor</em> usando la operacion <strong>FHIR</strong> <a href="OperationDefinition-MPI.PIXm.pix.html">$ihe-pix</a>
<br /></p>

<p>La URL para la operación se muestra a continuación:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[base]/Patient/$ihe-pix
</code></pre></div></div>

<p><br /></p>

<p>Para determinar la obtención de los <em>Identificadores Correspondientes</em> la operación debe ser como se describe a continuación mediante <strong>GET</strong>:
<br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Patient/$ihe-pix?sourceIdentifier=[token]{&amp;targetSystem=[uri]}{&amp;_format=[token]}
</code></pre></div></div>
<p><br />
El parámetro <em>sourceIdentifier</em> es obligatorio y solo es uno, en cambio el parámetro <em>targetSystrem</em> puede ser mas de uno separados cada uno de ellos por medio del caracter <strong>&amp;</strong>. En principio el parámetro <em>format</em> no se estará usando.</p>

<p>Como ejemplo
<br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /Patient/$ihe-pix?sourceIdentifier=urn:oid:2.16.840.1.113883.2.22.0.2.102100.50.10%ACL123456789876
</code></pre></div></div>
<p><br /></p>

<p>Para el caso de <strong>POST</strong>, se debe hacer uso de un recurso <a href="StructureDefinition-ParametrosEntradaPixmMpi.html">Parameter</a> en el <em>body</em>. Utilizando el ejemplo anterior debería quedar de la siguiente manera:
<br /></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST [base]/Patient/$ihe-pix
</code></pre></div></div>
<p><br /></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "resourceType" : "Parameters",
  "parameter" : [
    {
      "name" : "sourceIdentifier",
      "valueIdentifier" : {
        "system" : "urn:oid:2.16.840.1.113883.2.22.0.2.102100.50.10",
        "value" : "ACL123456789876"
      }
    }
  ]
}
</code></pre></div></div>
<p><br />
Esta operación hará búsqueda de todos los identificadores existentes para el paciente que en el sistema de dominio <em>2.16.840.1.113883.2.22.0.2.102100.50.10</em>, se encuentra identificado como <em>ACL123456789876</em></p>

<h5 id="respuesta">Respuesta</h5>

<p>La respuesta se desarrolla basada en un recurso <a href="StructureDefinition-ParametrosSalidaPixmMpi.html">Parameters</a> en donde cada parámetro de respuesta es un <em>targetIdentifier</em> con el valor del identificador y el dominio al cual pertenece
<br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "resourceType": "Parameters",
    "id": "ParametroSalidaIhe-PIXm",
    "meta": {
        "profile": [
            "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/ParametrosSalidaPixmMpi"
        ]
    },
    "parameter": [
        {
            "name": "targetIdentifier",
            "valueIdentifier": {
                "use": "official",
                "system": "urn:oid:2.16.840.1.113883.2.22.0.2.102100.50.10",
                "value": "ACL123456789876"
            }
        },
        {
            "name": "targetId",
            "valueReference": {
                "reference": "Patient/MinsalPacienteEjemplo"
            }
        },
        {
            "name": "targetId",
            "valueReference": {
                "reference": "Patient/DuplicadoMPIPaciente"
            }
        }
    ]
}
</code></pre></div></div>

<h3 id="caso-de-uso-2-consulta-de-información-de-datos-demográficos-de-paciente">Caso de Uso 2: Consulta de información de Datos Demográficos de paciente.</h3>
<p><br /></p>

<p>Este caso comprende la consulta de información de datos demográficos de paciente sobre multiples sistemas distribuidos basado en uno o más criterios de búsqueda</p>

<h4 id="actores-1">Actores</h4>
<p><br /></p>

<ul>
  <li><em>Consumidor de Información de Paciente</em>: Sistema que consulta por los datos de un paciente.</li>
  <li><em>Proveedor de la Información Demográfica de Paciente</em>: Sistema que provee al sistema que consulta, los datos requeridos sobre el paciente.</li>
</ul>

<h4 id="transacciones-1">Transacciones</h4>
<p><br /></p>

<p>Esta es básicamente una transacción de consulta basada en el perfil <strong>PDQm</strong>, que consite en la consulta del <em>Consumidor</em>  sobre datos demográficos del paciente para solicitar información sobre pacientes cuyos datos demográficos coinciden con los datos proporcionados en los parámetros de consulta del mensaje de solicitud. El proveedor de datos demográficos del paciente recibe la solicitud. El proveedor de datos demográficos de pacientes procesa la solicitud y devuelve una respuesta en forma de información demográfica de los pacientes coincidentes
<br /></p>

<div align="center">
  <img src="PDQtrans.png" /> 
  <p>Transacciones de 2 Casos de Uso (Fuente: Perfil IHE)</p>
</div>

<p><br /></p>

<p>Como se aprecia existen dos casos de uso declarado. El de <strong>Query</strong> será aquel que se trabajará por el momento, en el cual se consulta por todos los datos de pacientes asociados a los parámetros de busqueda hecha al que suple la información. El caso de <strong>Retrieve</strong> se aplica para la búsqueda específica de los datos de 1 (un) paciente.
<br /></p>

<h5 id="solicitud-mediante-query">Solicitud Mediante Query</h5>

<p>La operación se desarrolla basada en un <strong>HTTP GET</strong>  para búsqueda <em>SearchSet</em>
<br /></p>

<p>La especificación es como se muestra:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[base]/Patient?&lt;parameters&gt;
</code></pre></div></div>

<p><br /></p>

<p>Para nuestro caso se determinan un set de parámetros de búsqueda aceptables para realizar la operacion:</p>

<ul>
  <li>Por identificador
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /Patient?_format=json&amp;identifier=15335473-1
</code></pre></div>    </div>
    <p>El parámetro format no es necesario</p>
  </li>
  <li>Por registro activo
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /Patient?_format=json&amp;active=true
</code></pre></div>    </div>
  </li>
  <li>Por Fecha de Nacimiento
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /Patient?birthdate=1981-11-10
</code></pre></div>    </div>
  </li>
  <li>Por Apellido
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /Patient?family=martinez
</code></pre></div>    </div>
  </li>
  <li>Por Nombre
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /Patient?given=Andres
</code></pre></div>    </div>
  </li>
  <li>Por Id de Recurso
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /Patient?_id=AC1696435881599
</code></pre></div>    </div>
  </li>
  <li>Por Nombre Completo
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /Patient?name=Andres Martinez 
</code></pre></div>    </div>
  </li>
  <li>Por Telecom
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /Patient?telecom=5694332547
</code></pre></div>    </div>
  </li>
  <li>Por SegundoApellido
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /Patient?segundo-apellido=rochefort
</code></pre></div>    </div>
    <p><br /></p>
  </li>
</ul>

<h5 id="respuesta-mediante-query">Respuesta Mediante Query</h5>

<p>La respuesta del sistema que suple es un recurso <a href="StructureDefinition-BundleSearchMPI.html">Bundle</a> de tipo <strong>SearchSet</strong> en donde se indica la cantidad de recursos encontrados con los parámetros coincidentes y cada uno de los éstos incluídos como entrada.
<br /></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /Patient?identifier=15335473-1&amp;birthdate=1981-11-10&amp;name=andres%20martinez
</code></pre></div></div>
<p><br /></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "resourceType": "Bundle",
    "id": "EjemploBusqueda",
    "meta": {
        "profile": [
            "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/BundleSearchMPI"
        ]
    },
    "type": "searchset",
    "total": 1,
    "link": [
        {
            "relation": "self",
            "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/Patient?identifier=15335473-1&amp;birthdate=1981-11-10&amp;name=andres%20martinez"
        }
    ],
    "entry": [
        {
            "fullUrl": "https://interoperabilidad.minsal.cl/fhir/ig/nid/Patient/AC1696435881599",
            "resource": {
                "resourceType": "Patient",
                "id": "AC1696435881599",
                "meta": {
                    "profile": [
                        "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/MINSALPaciente"
                    ]
                },
                "extension": [
                    {
                        "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/IdentidadDeGenero",
                        "valueCodeableConcept": {
                            "coding": [
                                {
                                    "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CSIdentidaddeGenero",
                                    "code": "1",
                                    "display": "Masculino"
                                }
                            ]
                        }
                    },
                    {
                        "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/SexoBiologico",
                        "valueCodeableConcept": {
                            "coding": [
                                {
                                    "system": "http://hl7.org/fhir/administrative-gender",
                                    "code": "male",
                                    "display": "male"
                                }
                            ],
                            "text": "Masculino"
                        }
                    },
                    {
                        "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/CodigoPaises",
                        "valueCodeableConcept": {
                            "coding": [
                                {
                                    "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CodPais",
                                    "code": "152",
                                    "display": "Chile"
                                }
                            ]
                        }
                    },
                    {
                        "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/PaisOrigenMPI",
                        "valueCodeableConcept": {
                            "coding": [
                                {
                                    "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CodPais",
                                    "code": "032",
                                    "display": "Argentina"
                                }
                            ]
                        }
                    },
                    {
                        "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/Religion",
                        "valueCodeableConcept": {
                            "coding": [
                                {
                                    "system": "https://interoperabilidad.minsal.cl/fhir/ig/nid/CodeSystem/CSReligion",
                                    "code": "9",
                                    "display": "Ninguna, ateo, agnóstico"
                                }
                            ]
                        }
                    },
                    {
                        "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/PueblosAfrodescendiente",
                        "valueBoolean": false
                    },
                    {
                        "extension": [
                            {
                                "url": "pertenece",
                                "valueBoolean": false
                            }
                        ],
                        "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/PueblosOriginarios"
                    }
                ],
                "identifier": [
                    {
                        "use": "official",
                        "type": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/CodigoPaises",
                                    "valueCodeableConcept": {
                                        "coding": [
                                            {
                                                "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CodPais",
                                                "code": "152",
                                                "display": "Chile"
                                            }
                                        ]
                                    }
                                }
                            ],
                            "coding": [
                                {
                                    "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CSTipoIdentificador",
                                    "code": "01",
                                    "display": "RUN"
                                }
                            ]
                        },
                        "value": "12216373-3"
                    }
                ],
                "active": true,
                "name": [
                    {
                        "use": "official",
                        "family": "Martinez",
                        "_family": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/SegundoApellido",
                                    "valueString": "rochefort"
                                }
                            ]
                        },
                        "given": [
                            "Andres"
                        ]
                    }
                ],
                "telecom": [
                    {
                        "system": "phone",
                        "value": "+5694332547",
                        "use": "mobile"
                    }
                ],
                "gender": "male",
                "birthDate": "1981-11-10",
                "deceasedBoolean": false,
                "address": [
                    {
                        "extension": [
                            {
                                "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/SituacionCalle",
                                "valueBoolean": false
                            }
                        ],
                        "use": "home",
                        "line": [
                            "Calle Los Cedros 1234, Casa 15"
                        ],
                        "_city": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/ComunasCl",
                                    "valueCodeableConcept": {
                                        "coding": [
                                            {
                                                "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CSCodComunasCL",
                                                "code": "13110",
                                                "display": "La Florida"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        "_district": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/ProvinciasCl",
                                    "valueCodeableConcept": {
                                        "coding": [
                                            {
                                                "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CSCodProvinciasCL",
                                                "code": "131",
                                                "display": "Santiago"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        "_state": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/RegionesCl",
                                    "valueCodeableConcept": {
                                        "coding": [
                                            {
                                                "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CSCodRegionCL",
                                                "code": "13",
                                                "display": "Metropolitana de Santiago"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        "_country": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/CodigoPaises",
                                    "valueCodeableConcept": {
                                        "coding": [
                                            {
                                                "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CodPais",
                                                "code": "152",
                                                "display": "Chile"
                                            }
                                        ]
                                    }
                                }
                            ]
                        }
                    }
                ],
                "maritalStatus": {
                    "coding": [
                        {
                            "system": "https://interoperabilidad.minsal.cl/fhir/ig/nid/CodeSystem/CSEstadoCivil",
                            "code": "01",
                            "display": "Soltero(a)"
                        }
                    ]
                }
            },
            "search": {
                "mode": "match"
            }
        }
    ]
}
</code></pre></div></div>
<p><br /></p>

<h5 id="solicitud-mediante-retrive">Solicitud Mediante Retrive</h5>

<p>La operación se desarrolla basada en un <strong>HTTP POST</strong> utilizando un recurso <a href="StructureDefinition-ParametrosEntradaPDQmMpi.html">Parameters</a> en el cuerpo, donde uno de sus parámetros es un recurso <a href="StructureDefinition-MINSALPacienteBusqueda.html">Patient</a>, el cuál son los datos que permitirán la búsqueda de los pacientes utilizando la operación <a href="https://build.fhir.org/ig/Minsal-CL/NID/OperationDefinition-MPI.PDQm.match.html">$match</a>.</p>

<p><br />
La especificación es como se muestra:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[base]/Patient/$match
</code></pre></div></div>
<p><br /></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "resourceType": "Parameters",
    "parameter": [
        {
            "name": "resource",
            "resource": {
                //Recurso Patient
            }     
        },
        {
            "name": "onlyCertainMatches",
            "valueBoolean": //true o false
        },
        {
            "name": "count",
            "valueInteger": //valor entero
        }
    ]
}
</code></pre></div></div>
<p><br />
<br />
Ejemplo del uso de la operación <strong>$match</strong>
La especificación es como se muestra:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /Patient/$match
</code></pre></div></div>
<p><br /></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "resourceType": "Parameters",
    "parameter": [
        {
            "name": "resource",
            "resource": {
                "resourceType": "Patient",
                "identifier": [
                    {
                        "use": "official",
                        "type": {
                            "coding": [
                                {
                                    "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CSTipoIdentificador",
                                    "code": "01",
                                    "display": "RUN"
                                }
                            ]
                        },
                        "value": "12216373-3"
                    }
                ],
                "active": true,
                "name": [
                    {
                        "use": "official",
                        "family": "Martinez",
                        "given": [
                            "Andres"
                        ]
                    }
                ],
                "telecom": [
                    {
                        "system": "phone",
                        "value": "+5694332547"
                    }
                ],
                "gender": "male",
                "birthDate": "1981-11-10"
            }
        },
        {
            "name": "onlyCertainMatches",
            "valueBoolean": false
        },
        {
            "name": "count",
            "valueInteger": 1
        }
    ]
}
</code></pre></div></div>
<p><br /></p>

<h5 id="respuesta-mediante-retrive">Respuesta Mediante Retrive</h5>

<p>El resultado de la operación $match es un recurso <a href="StructureDefinition-BundleSearchMPIMatch.html">Bundle Searchset</a>, el cuál puede entregar uno o más recursos pacientes que correspondan a la busqueda. En el caso de alguna dificultad o problema con la operación se entregará un <strong>Operation Ouctome</strong> dentro de los resultados del Bundle.
Ejemplo de un $match exitoso:
<br /></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "resourceType": "Bundle",
    "type": "searchset",
    "total": 1,
    "link": [
        {
            "relation": "self",
            "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/Patient/$match"
        }
    ],
    "entry": [
        {
            "fullUrl": "https://interoperabilidad.minsal.cl/fhir/ig/nid/Patient/AC1696435881599",
            "resource": {
                "resourceType": "Patient",
                "id": "AC1696435881599",
                "meta": {
                    "profile": [
                        "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/MINSALPaciente"
                    ]
                }
                "extension": [
                    {
                        "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/IdentidadDeGenero",
                        "valueCodeableConcept": {
                            "coding": [
                                {
                                    "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CSIdentidaddeGenero",
                                    "code": "1",
                                    "display": "Masculino"
                                }
                            ]
                        }
                    },
                    {
                        "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/SexoBiologico",
                        "valueCodeableConcept": {
                            "coding": [
                                {
                                    "system": "http://hl7.org/fhir/administrative-gender",
                                    "code": "male",
                                    "display": "male"
                                }
                            ],
                            "text": "Masculino"
                        }
                    },
                    {
                        "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/CodigoPaises",
                        "valueCodeableConcept": {
                            "coding": [
                                {
                                    "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CodPais",
                                    "code": "152",
                                    "display": "Chile"
                                }
                            ]
                        }
                    },
                    {
                        "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/PaisOrigenMPI",
                        "valueCodeableConcept": {
                            "coding": [
                                {
                                    "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CodPais",
                                    "code": "032",
                                    "display": "Argentina"
                                }
                            ]
                        }
                    },
                    {
                        "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/Religion",
                        "valueCodeableConcept": {
                            "coding": [
                                {
                                    "system": "https://interoperabilidad.minsal.cl/fhir/ig/nid/CodeSystem/CSReligion",
                                    "code": "9",
                                    "display": "Ninguna, ateo, agnóstico"
                                }
                            ]
                        }
                    },
                    {
                        "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/PueblosAfrodescendiente",
                        "valueBoolean": false
                    },
                    {
                        "extension": [
                            {
                                "url": "pertenece",
                                "valueBoolean": false
                            }
                        ],
                        "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/PueblosOriginarios"
                    }
                ],
                "identifier": [
                    {
                        "use": "official",
                        "type": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/CodigoPaises",
                                    "valueCodeableConcept": {
                                        "coding": [
                                            {
                                                "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CodPais",
                                                "code": "152",
                                                "display": "Chile"
                                            }
                                        ]
                                    }
                                }
                            ],
                            "coding": [
                                {
                                    "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CSTipoIdentificador",
                                    "code": "01",
                                    "display": "RUN"
                                }
                            ]
                        },
                        "value": "12216373-3"
                    }
                ],
                "active": true,
                "name": [
                    {
                        "use": "official",
                        "family": "Martinez",
                        "_family": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/SegundoApellido",
                                    "valueString": "rochefort"
                                }
                            ]
                        },
                        "given": [
                            "Andres"
                        ]
                    }
                ],
                "telecom": [
                    {
                        "system": "phone",
                        "value": "+5694332547",
                        "use": "mobile"
                    }
                ],
                "gender": "male",
                "birthDate": "1981-11-10",
                "deceasedBoolean": false,
                "address": [
                    {
                        "extension": [
                            {
                                "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/StructureDefinition/SituacionCalle",
                                "valueBoolean": false
                            }
                        ],
                        "use": "home",
                        "line": [
                            "Calle Los Cedros 1234, Casa 15"
                        ],
                        "_city": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/ComunasCl",
                                    "valueCodeableConcept": {
                                        "coding": [
                                            {
                                                "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CSCodComunasCL",
                                                "code": "13110",
                                                "display": "La Florida"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        "_district": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/ProvinciasCl",
                                    "valueCodeableConcept": {
                                        "coding": [
                                            {
                                                "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CSCodProvinciasCL",
                                                "code": "131",
                                                "display": "Santiago"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        "_state": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/RegionesCl",
                                    "valueCodeableConcept": {
                                        "coding": [
                                            {
                                                "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CSCodRegionCL",
                                                "code": "13",
                                                "display": "Metropolitana de Santiago"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        "_country": {
                            "extension": [
                                {
                                    "url": "https://hl7chile.cl/fhir/ig/clcore/StructureDefinition/CodigoPaises",
                                    "valueCodeableConcept": {
                                        "coding": [
                                            {
                                                "system": "https://hl7chile.cl/fhir/ig/clcore/CodeSystem/CodPais",
                                                "code": "152",
                                                "display": "Chile"
                                            }
                                        ]
                                    }
                                }
                            ]
                        }
                    }
                ],
                "maritalStatus": {
                    "coding": [
                        {
                            "system": "https://interoperabilidad.minsal.cl/fhir/ig/nid/CodeSystem/CSEstadoCivil",
                            "code": "01",
                            "display": "Soltero(a)"
                        }
                    ]
                }
            },
            "search": {
                "extension": [
                    {
                        "url": "http://hl7.org/fhir/StructureDefinition/match-grade",
                        "valueCode": "probable"
                    }
                ],
                "mode": "match",
                "score": 0.7
            }
        }
    ]
}
</code></pre></div></div>
<p>Ejemplo con <strong>OperationOutcome</strong>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "resourceType": "Bundle",
    "type": "searchset",
    "link": [
        {
            "relation": "self",
            "url": "https://interoperabilidad.minsal.cl/fhir/ig/nid/Patient/$match"
        }
    ],
    "entry": [
        {
            "fullUrl": "https://interoperabilidad.minsal.cl/fhir/ig/nid/OperationOutcome/OperationOutcomeFalloMatch",
            "resource": {
                "resourceType": "OperationOutcome",
                "id": "OperationOutcomeFalloMatch",
                "issue": [
                    {
                        "severity": "error",
                        "code": "timeout",
                        "details": {
                            "text": "La búsqueda ha expirado debido a un timeout en el servidor."
                        }
                    }
                ]
            },
            "search": {
                "mode": "outcome"
            }
        }
    ]
}
</code></pre></div></div>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &#169; 2023+ <a style="color:var(--footer-hyperlink-text-color)" href="https://interoperabilidad.minsal.cl">Unidad de Interoperabilidad - MINSAL</a>.  Package hl7.fhir.cl.minsal.nid-mpi-hpd#0.4.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Fri, Oct 4, 2024 16:57-0300">2024-10-04</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
             Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Tabla de contenidos</a> |
<a style="color: var(--footer-hyperlink-text-color)" href="qa.html">Reporte QA</a> |
<a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://interoperabilidad.minsal.cl/fhir/ig/nid/history.html">Historial de versiones</a></a>
 | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="">Issues</a>
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->

  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

